(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[782],{2329:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/companies",function(){return s(6647)}])},6647:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return g}});var a=s(5893),r=s(7294),n=s(9008),l=s.n(n),i=s(2285),c=s(4020),d=s(50);let o=r.forwardRef(function({title:e,titleId:t,...s},a){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},s),e?r.createElement("title",{id:t},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))});var m=s(8974),x=s(6249),u=s(8680);function h(e){let{companies:t,onEdit:s,onDelete:r,onToggleStatus:n}=e;return 0===t.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(c.Z,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,a.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No hay empresas"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Comienza creando una nueva empresa."})]}):(0,a.jsx)("div",{className:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-300",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Empresa"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"NIF/CIF"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Pa\xeds"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Moneda"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"h-10 w-10 flex-shrink-0",children:(0,a.jsx)("div",{className:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center",children:(0,a.jsx)(c.Z,{className:"h-5 w-5 text-blue-600"})})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["Creada: ",new Date(e.created_at).toLocaleDateString("es-ES")]})]})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.tax_id}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.country_code}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.currency}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("button",{onClick:()=>n(e),className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat("active"===e.status?"bg-green-100 text-green-800 hover:bg-green-200":"bg-red-100 text-red-800 hover:bg-red-200"," transition-colors cursor-pointer"),children:"active"===e.status?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.Z,{className:"h-3 w-3 mr-1"}),"Activa"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o,{className:"h-3 w-3 mr-1"}),"Inactiva"]})})}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[(0,a.jsxs)("button",{onClick:()=>s(e),className:"text-blue-600 hover:text-blue-900 inline-flex items-center",children:[(0,a.jsx)(m.Z,{className:"h-4 w-4 mr-1"}),"Editar"]}),(0,a.jsxs)("button",{onClick:()=>r(e),className:"text-red-600 hover:text-red-900 inline-flex items-center",children:[(0,a.jsx)(x.Z,{className:"h-4 w-4 mr-1"}),"Eliminar"]})]})]},e.id))})]})})}function p(e){let{company:t,isOpen:s,onClose:n,onSubmit:l}=e,[i,c]=(0,r.useState)({name:"",tax_id:"",country_code:"ES",currency:"EUR"});return((0,r.useEffect)(()=>{t?c({name:t.name||"",tax_id:t.tax_id||"",country_code:t.country_code||"ES",currency:t.currency||"EUR"}):c({name:"",tax_id:"",country_code:"ES",currency:"EUR"})},[t]),s)?(0,a.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,a.jsx)("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:(0,a.jsxs)("div",{className:"mt-3",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:t?"Editar Empresa":"Nueva Empresa"}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),l(i)},className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Nombre"}),(0,a.jsx)("input",{type:"text",required:!0,value:i.name,onChange:e=>c({...i,name:e.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"NIF/CIF"}),(0,a.jsx)("input",{type:"text",required:!0,value:i.tax_id,onChange:e=>c({...i,tax_id:e.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Pa\xeds"}),(0,a.jsxs)("select",{value:i.country_code,onChange:e=>c({...i,country_code:e.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"ES",children:"Espa\xf1a"}),(0,a.jsx)("option",{value:"FR",children:"Francia"}),(0,a.jsx)("option",{value:"DE",children:"Alemania"}),(0,a.jsx)("option",{value:"IT",children:"Italia"}),(0,a.jsx)("option",{value:"PT",children:"Portugal"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Moneda"}),(0,a.jsxs)("select",{value:i.currency,onChange:e=>c({...i,currency:e.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"EUR",children:"EUR - Euro"}),(0,a.jsx)("option",{value:"USD",children:"USD - D\xf3lar"}),(0,a.jsx)("option",{value:"GBP",children:"GBP - Libra"})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,a.jsx)("button",{type:"button",onClick:n,className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 transition-colors",children:"Cancelar"}),(0,a.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:t?"Actualizar":"Crear"})]})]})]})})}):null}function g(){let[e,t]=(0,r.useState)([]),[s,n]=(0,r.useState)(!0),[m,x]=(0,r.useState)(!1),[g,j]=(0,r.useState)(null);(0,r.useEffect)(()=>{(async()=>{try{setTimeout(()=>{t([{id:1,name:"ARI Family Assets S.L.",tax_id:"B12345678",country_code:"ES",currency:"EUR",status:"active",created_at:"2024-01-15T10:00:00Z"},{id:2,name:"TechCorp Solutions",tax_id:"A87654321",country_code:"ES",currency:"EUR",status:"active",created_at:"2024-02-01T14:30:00Z"},{id:3,name:"Global Services Ltd",tax_id:"C11223344",country_code:"FR",currency:"EUR",status:"inactive",created_at:"2024-01-20T09:15:00Z"}]),n(!1)},1e3)}catch(e){console.error("Error cargando empresas:",e),n(!1)}})()},[]);let f=async s=>{if(confirm("\xbfEst\xe1s seguro de que quieres eliminar ".concat(s.name,"?")))try{t(e.filter(e=>e.id!==s.id))}catch(e){console.error("Error eliminando empresa:",e)}},v=async s=>{try{let a="active"===s.status?"inactive":"active";t(e.map(e=>e.id===s.id?{...e,status:a}:e))}catch(e){console.error("Error cambiando estado:",e)}},y=async s=>{try{if(g)t(e.map(e=>e.id===g.id?{...e,...s}:e));else{let a={id:Date.now(),...s,status:"active",created_at:new Date().toISOString()};t([...e,a])}x(!1),j(null)}catch(e){console.error("Error guardando empresa:",e)}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(l(),{children:[(0,a.jsx)("title",{children:"Empresas - CRM System"}),(0,a.jsx)("meta",{name:"description",content:"Gesti\xf3n de empresas del CRM"})]}),(0,a.jsxs)(i.Z,{children:[(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Empresas"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Gestiona las empresas registradas en el sistema"})]}),(0,a.jsxs)("button",{onClick:()=>{j(null),x(!0)},className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:[(0,a.jsx)(u.Z,{className:"h-5 w-5 mr-2"}),"Nueva Empresa"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-3",children:[(0,a.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,a.jsx)("div",{className:"p-5",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)(c.Z,{className:"h-6 w-6 text-blue-600"})}),(0,a.jsxs)("div",{className:"ml-5",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Total Empresas"}),(0,a.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:e.length})]})]})})}),(0,a.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,a.jsx)("div",{className:"p-5",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)(d.Z,{className:"h-6 w-6 text-green-600"})}),(0,a.jsxs)("div",{className:"ml-5",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Activas"}),(0,a.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:e.filter(e=>"active"===e.status).length})]})]})})}),(0,a.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,a.jsx)("div",{className:"p-5",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)(o,{className:"h-6 w-6 text-red-600"})}),(0,a.jsxs)("div",{className:"ml-5",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Inactivas"}),(0,a.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:e.filter(e=>"inactive"===e.status).length})]})]})})})]}),(0,a.jsxs)("div",{className:"bg-white shadow rounded-lg",children:[(0,a.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Lista de Empresas"})}),(0,a.jsx)("div",{className:"p-6",children:s?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),(0,a.jsx)("p",{className:"mt-2 text-gray-500",children:"Cargando empresas..."})]}):(0,a.jsx)(h,{companies:e,onEdit:e=>{j(e),x(!0)},onDelete:f,onToggleStatus:v})})]})]}),(0,a.jsx)(p,{company:g,isOpen:m,onClose:()=>{x(!1),j(null)},onSubmit:y})]})]})}},50:function(e,t,s){"use strict";var a=s(7294);let r=a.forwardRef(function({title:e,titleId:t,...s},r){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},s),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))});t.Z=r},8974:function(e,t,s){"use strict";var a=s(7294);let r=a.forwardRef(function({title:e,titleId:t,...s},r){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},s),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))});t.Z=r},6249:function(e,t,s){"use strict";var a=s(7294);let r=a.forwardRef(function({title:e,titleId:t,...s},r){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},s),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))});t.Z=r}},function(e){e.O(0,[155,732,774,888,179],function(){return e(e.s=2329)}),_N_E=e.O()}]);