#!/bin/bash

# üîç DIAGN√ìSTICO JAVASCRIPT ELIMINANDO CSS
echo "üîç DIAGN√ìSTICO JAVASCRIPT ELIMINANDO CSS"
echo "========================================"

echo "üí° PROBLEMA IDENTIFICADO:"
echo "El CSS carga (visible por instante) pero JavaScript lo elimina despu√©s"
echo ""

echo "üîß ACCIONES INMEDIATAS EN DEVTOOLS:"
echo "=================================="
echo ""
echo "1. üåê Abre: https://crm.arifamilyassets.com"
echo "2. üîß F12 ‚Üí Network tab ANTES de cargar"
echo "3. üîÑ Reload (F5)"
echo "4. üîç Busca archivos CSS cargados"
echo "5. ‚úÖ ¬øCSS carga con HTTP 200?"
echo ""
echo "Si CSS carga pero desaparece:"
echo "----------------------------"
echo ""
echo "6. üîß F12 ‚Üí Console"
echo "7. üìù Pega este c√≥digo para debug:"
echo ""
echo "// DETECTAR QU√â EST√Å ELIMINANDO EL CSS"
echo "const observer = new MutationObserver(mutations => {"
echo "  mutations.forEach(mutation => {"
echo "    if (mutation.type === 'childList') {"
echo "      mutation.removedNodes.forEach(node => {"
echo "        if (node.tagName === 'LINK' && node.rel === 'stylesheet') {"
echo "          console.error('üö® CSS LINK ELIMINADO:', node.href);"
echo "          console.trace('Stack trace del culpable:');"
echo "        }"
echo "        if (node.tagName === 'STYLE') {"
echo "          console.error('üö® STYLE TAG ELIMINADO:', node.textContent.substring(0, 100));"
echo "          console.trace('Stack trace del culpable:');"
echo "        }"
echo "      });"
echo "    }"
echo "    if (mutation.type === 'attributes' && mutation.attributeName === 'class') {"
echo "      console.log('üîÑ CLASE CAMBIADA:', mutation.target, 'Nueva:', mutation.target.className);"
echo "    }"
echo "  });"
echo "});"
echo ""
echo "observer.observe(document, {"
echo "  childList: true,"
echo "  subtree: true,"
echo "  attributes: true,"
echo "  attributeFilter: ['class', 'style']"
echo "});"
echo ""
echo "console.log('üïµÔ∏è Observer activado - detectar√° cambios CSS');"
echo ""
echo "8. üîÑ Reload nuevamente"
echo "9. üìä Ver qu√© aparece en Console"
echo ""
echo "ALTERNATIVA R√ÅPIDA:"
echo "=================="
echo "En Console, tambi√©n ejecutar:"
echo ""
echo "// VERIFICAR SI CSS EST√Å CARGADO"
echo "console.log('CSS Links:', document.querySelectorAll('link[rel=\"stylesheet\"]'));"
echo "console.log('Style Tags:', document.querySelectorAll('style'));"
echo ""
echo "// VERIFICAR COMPUTADO DE ELEMENTO FLEX"
echo "const flexEl = document.querySelector('.flex');"
echo "if (flexEl) {"
echo "  console.log('Elemento .flex encontrado:', flexEl);"
echo "  console.log('Computed display:', getComputedStyle(flexEl).display);"
echo "  console.log('Todas las clases:', flexEl.className);"
echo "} else {"
echo "  console.log('‚ùå No hay elementos con clase .flex');"
echo "}"