{"openapi":"3.1.0","info":{"title":"Sistema ERP Empresarial","description":"\n    Sistema de Planificación de Recursos Empresariales (ERP) modular, escalable y configurable.\n    \n    ## Características principales:\n    \n    * **Arquitectura empresarial**: Implementa patrones Domain Model, Repository, Unit of Work y Service Layer\n    * **Gestión de compañías**: Soporte multi-empresa con configuración independiente\n    * **Recursos humanos**: Gestión completa de empleados, estructuras salariales y nómina\n    * **Finanzas**: Facturación electrónica B2B, gestión contable y reportes financieros\n    * **Inteligencia artificial**: Clasificación automática de emails y agente conversacional\n    * **Integraciones**: Conectores API flexibles para sistemas externos\n    \n    ## Módulos disponibles:\n    \n    * **Companies**: Gestión de empresas y configuración multi-tenant\n    * **AI**: Servicios de inteligencia artificial y automatización\n    * **Payroll**: Nómina, estructura salarial y gestión de empleados\n    * **Finance**: Facturación, contabilidad y reportes financieros\n    * **External API**: Integraciones con APIs externas\n    ","contact":{"name":"Equipo de Desarrollo ERP","email":"dev@erp-sistema.com"},"license":{"name":"MIT License","url":"https://opensource.org/licenses/MIT"},"version":"1.0.0"},"paths":{"/health":{"get":{"tags":["Health"],"summary":"Health Check","description":"Health check endpoint for monitoring and load balancers","operationId":"health_check_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/info":{"get":{"tags":["API Info"],"summary":"API Information","description":"Get API information and available endpoints","operationId":"api_info_api_info_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/companies/":{"post":{"tags":["Companies"],"summary":"Create Company","description":"Create a new company","operationId":"create_company_api_companies__post","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CompanyCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CompanyResponse"}}}},"404":{"description":"Company not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["Companies"],"summary":"Get Companies","description":"Get list of companies with optional filtering","operationId":"get_companies_api_companies__get","parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","minimum":0,"description":"Number of records to skip","default":0,"title":"Skip"},"description":"Number of records to skip"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":1000,"minimum":1,"description":"Maximum number of records to return","default":100,"title":"Limit"},"description":"Maximum number of records to return"},{"name":"status_filter","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by company status","title":"Status Filter"},"description":"Filter by company status"},{"name":"country","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by country code","title":"Country"},"description":"Filter by country code"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CompanyResponse"},"title":"Response Get Companies Api Companies  Get"}}}},"404":{"description":"Company not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/companies/{company_id}":{"get":{"tags":["Companies"],"summary":"Get Company","description":"Get company by ID","operationId":"get_company_api_companies__company_id__get","parameters":[{"name":"company_id","in":"path","required":true,"schema":{"type":"integer","title":"Company Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CompanyResponse"}}}},"404":{"description":"Company not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["Companies"],"summary":"Update Company","description":"Update company information","operationId":"update_company_api_companies__company_id__put","parameters":[{"name":"company_id","in":"path","required":true,"schema":{"type":"integer","title":"Company Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CompanyUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CompanyResponse"}}}},"404":{"description":"Company not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Companies"],"summary":"Delete Company","description":"Delete company","operationId":"delete_company_api_companies__company_id__delete","parameters":[{"name":"company_id","in":"path","required":true,"schema":{"type":"integer","title":"Company Id"}}],"responses":{"204":{"description":"Successful Response"},"404":{"description":"Company not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/companies/{company_id}/activate":{"post":{"tags":["Companies"],"summary":"Activate Company","description":"Activate company","operationId":"activate_company_api_companies__company_id__activate_post","parameters":[{"name":"company_id","in":"path","required":true,"schema":{"type":"integer","title":"Company Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CompanyResponse"}}}},"404":{"description":"Company not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/companies/{company_id}/deactivate":{"post":{"tags":["Companies"],"summary":"Deactivate Company","description":"Deactivate company","operationId":"deactivate_company_api_companies__company_id__deactivate_post","parameters":[{"name":"company_id","in":"path","required":true,"schema":{"type":"integer","title":"Company Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CompanyResponse"}}}},"404":{"description":"Company not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/ai/classify-email":{"post":{"tags":["Artificial Intelligence"],"summary":"Classify Email","description":"Classify email into predefined categories","operationId":"classify_email_api_ai_classify_email_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EmailClassificationRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EmailClassificationResponse"}}}},"404":{"description":"AI service not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/ai/generate-response":{"post":{"tags":["Artificial Intelligence"],"summary":"Generate Email Response","description":"Generate automated email response","operationId":"generate_email_response_api_ai_generate_response_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EmailResponseRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EmailResponseResponse"}}}},"404":{"description":"AI service not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/ai/process-email":{"post":{"tags":["Artificial Intelligence"],"summary":"Process Email Workflow","description":"Complete email processing workflow: classify + route + generate response","operationId":"process_email_workflow_api_ai_process_email_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EmailWorkflowRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EmailWorkflowResponse"}}}},"404":{"description":"AI service not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/ai/train-classifier":{"post":{"tags":["Artificial Intelligence"],"summary":"Train Classifier","description":"Train or retrain the email classification model","operationId":"train_classifier_api_ai_train_classifier_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TrainingRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TrainingResponse"}}}},"404":{"description":"AI service not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/ai/classifier-info":{"get":{"tags":["Artificial Intelligence"],"summary":"Get Classifier Info","description":"Get information about the current classifier model","operationId":"get_classifier_info_api_ai_classifier_info_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"404":{"description":"AI service not found"}}}},"/api/ai/analytics/classification":{"get":{"tags":["Artificial Intelligence"],"summary":"Get Classification Analytics","description":"Get analytics about email classifications","operationId":"get_classification_analytics_api_ai_analytics_classification_get","parameters":[{"name":"date_from","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Start date (YYYY-MM-DD)","title":"Date From"},"description":"Start date (YYYY-MM-DD)"},{"name":"date_to","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"End date (YYYY-MM-DD)","title":"Date To"},"description":"End date (YYYY-MM-DD)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"404":{"description":"AI service not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/ai/analytics/responses":{"get":{"tags":["Artificial Intelligence"],"summary":"Get Response Analytics","description":"Get analytics about generated responses","operationId":"get_response_analytics_api_ai_analytics_responses_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"404":{"description":"AI service not found"}}}},"/api/ai/update-system-prompt":{"post":{"tags":["Artificial Intelligence"],"summary":"Update System Prompt","description":"Update the conversational agent's system prompt","operationId":"update_system_prompt_api_ai_update_system_prompt_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateSystemPromptRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"404":{"description":"AI service not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/payroll/employees":{"post":{"tags":["Payroll & HR"],"summary":"Create Employee","description":"Create a new employee","operationId":"create_employee_api_payroll_employees_post","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EmployeeCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EmployeeResponse"}}}},"404":{"description":"Payroll resource not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["Payroll & HR"],"summary":"Get Employees","description":"Get employees with optional filtering","operationId":"get_employees_api_payroll_employees_get","parameters":[{"name":"company_id","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"Filter by company ID","title":"Company Id"},"description":"Filter by company ID"},{"name":"skip","in":"query","required":false,"schema":{"type":"integer","minimum":0,"default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":1000,"minimum":1,"default":100,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/EmployeeResponse"},"title":"Response Get Employees Api Payroll Employees Get"}}}},"404":{"description":"Payroll resource not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/payroll/salary-structures":{"post":{"tags":["Payroll & HR"],"summary":"Create Salary Structure","description":"Create a new salary structure","operationId":"create_salary_structure_api_payroll_salary_structures_post","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SalaryStructureCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SalaryStructureResponse"}}}},"404":{"description":"Payroll resource not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["Payroll & HR"],"summary":"Get Salary Structures","description":"Get salary structures","operationId":"get_salary_structures_api_payroll_salary_structures_get","parameters":[{"name":"company_id","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"Filter by company ID","title":"Company Id"},"description":"Filter by company ID"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/SalaryStructureResponse"},"title":"Response Get Salary Structures Api Payroll Salary Structures Get"}}}},"404":{"description":"Payroll resource not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/payroll/calculate":{"post":{"tags":["Payroll & HR"],"summary":"Calculate Payroll","description":"Calculate payroll for an employee","operationId":"calculate_payroll_api_payroll_calculate_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PayrollCalculationRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PayrollCalculationResponse"}}}},"404":{"description":"Payroll resource not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/finance/invoices":{"post":{"tags":["Finance"],"summary":"Create Invoice","description":"Create a new invoice","operationId":"create_invoice_api_finance_invoices_post","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InvoiceCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InvoiceResponse"}}}},"404":{"description":"Finance resource not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["Finance"],"summary":"Get Invoices","description":"Get invoices with optional filtering","operationId":"get_invoices_api_finance_invoices_get","parameters":[{"name":"company_id","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"Filter by company ID","title":"Company Id"},"description":"Filter by company ID"},{"name":"status_filter","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by status","title":"Status Filter"},"description":"Filter by status"},{"name":"skip","in":"query","required":false,"schema":{"type":"integer","minimum":0,"default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":1000,"minimum":1,"default":100,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/InvoiceResponse"},"title":"Response Get Invoices Api Finance Invoices Get"}}}},"404":{"description":"Finance resource not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/finance/invoices/{invoice_id}":{"get":{"tags":["Finance"],"summary":"Get Invoice","description":"Get invoice by ID","operationId":"get_invoice_api_finance_invoices__invoice_id__get","parameters":[{"name":"invoice_id","in":"path","required":true,"schema":{"type":"integer","title":"Invoice Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InvoiceResponse"}}}},"404":{"description":"Finance resource not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/finance/invoices/{invoice_id}/lines":{"post":{"tags":["Finance"],"summary":"Add Invoice Line","description":"Add line item to invoice","operationId":"add_invoice_line_api_finance_invoices__invoice_id__lines_post","parameters":[{"name":"invoice_id","in":"path","required":true,"schema":{"type":"integer","title":"Invoice Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InvoiceLineCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InvoiceLineResponse"}}}},"404":{"description":"Finance resource not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/finance/invoices/{invoice_id}/electronic-signature":{"post":{"tags":["Finance"],"summary":"Apply Electronic Signature","description":"Apply electronic signature to invoice","operationId":"apply_electronic_signature_api_finance_invoices__invoice_id__electronic_signature_post","parameters":[{"name":"invoice_id","in":"path","required":true,"schema":{"type":"integer","title":"Invoice Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ElectronicSignatureRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"404":{"description":"Finance resource not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/finance/invoices/{invoice_id}/send":{"post":{"tags":["Finance"],"summary":"Send Invoice Electronically","description":"Send invoice electronically","operationId":"send_invoice_electronically_api_finance_invoices__invoice_id__send_post","parameters":[{"name":"invoice_id","in":"path","required":true,"schema":{"type":"integer","title":"Invoice Id"}},{"name":"recipient_email","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Override recipient email","title":"Recipient Email"},"description":"Override recipient email"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"404":{"description":"Finance resource not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/finance/invoices/{invoice_id}/mark-paid":{"post":{"tags":["Finance"],"summary":"Mark Invoice As Paid","description":"Mark invoice as paid","operationId":"mark_invoice_as_paid_api_finance_invoices__invoice_id__mark_paid_post","parameters":[{"name":"invoice_id","in":"path","required":true,"schema":{"type":"integer","title":"Invoice Id"}},{"name":"payment_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"description":"Payment date","title":"Payment Date"},"description":"Payment date"},{"name":"payment_reference","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Payment reference","title":"Payment Reference"},"description":"Payment reference"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"404":{"description":"Finance resource not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/finance/reports/invoices":{"get":{"tags":["Finance"],"summary":"Generate Invoice Report","description":"Generate invoice report for a period","operationId":"generate_invoice_report_api_finance_reports_invoices_get","parameters":[{"name":"company_id","in":"query","required":true,"schema":{"type":"integer","description":"Company ID","title":"Company Id"},"description":"Company ID"},{"name":"date_from","in":"query","required":true,"schema":{"type":"string","format":"date","description":"Start date","title":"Date From"},"description":"Start date"},{"name":"date_to","in":"query","required":true,"schema":{"type":"string","format":"date","description":"End date","title":"Date To"},"description":"End date"},{"name":"status_filter","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by status","title":"Status Filter"},"description":"Filter by status"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InvoiceReportResponse"}}}},"404":{"description":"Finance resource not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/external-api/execute":{"post":{"tags":["External API Integration"],"summary":"Execute Custom Request","description":"Execute a custom HTTP request with full configuration","operationId":"execute_custom_request_api_external_api_execute_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ExecuteRequestBody"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponse"}}}},"404":{"description":"Integration not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/external-api/integrations":{"get":{"tags":["External API Integration"],"summary":"Get Integrations","description":"Get list of registered integrations","operationId":"get_integrations_api_external_api_integrations_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Response Get Integrations Api External Api Integrations Get"}}}},"404":{"description":"Integration not found"}}},"post":{"tags":["External API Integration"],"summary":"Register Integration","description":"Register a new API integration configuration","operationId":"register_integration_api_external_api_integrations_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/IntegrationConfig"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"404":{"description":"Integration not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/external-api/integrations/{integration_name}/execute":{"post":{"tags":["External API Integration"],"summary":"Execute Integration","description":"Execute a registered API integration","operationId":"execute_integration_api_external_api_integrations__integration_name__execute_post","parameters":[{"name":"integration_name","in":"path","required":true,"schema":{"type":"string","title":"Integration Name"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/IntegrationExecuteBody"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponse"}}}},"404":{"description":"Integration not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/external-api/integrations/{integration_name}/test":{"post":{"tags":["External API Integration"],"summary":"Test Integration","description":"Test a registered API integration","operationId":"test_integration_api_external_api_integrations__integration_name__test_post","parameters":[{"name":"integration_name","in":"path","required":true,"schema":{"type":"string","title":"Integration Name"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/IntegrationTestResult"}}}},"404":{"description":"Integration not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/external-api/integrations/{integration_name}":{"delete":{"tags":["External API Integration"],"summary":"Delete Integration","description":"Delete a registered integration","operationId":"delete_integration_api_external_api_integrations__integration_name__delete","parameters":[{"name":"integration_name","in":"path","required":true,"schema":{"type":"string","title":"Integration Name"}}],"responses":{"204":{"description":"Successful Response"},"404":{"description":"Integration not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["External API Integration"],"summary":"Get Integration Details","description":"Get details of a specific integration","operationId":"get_integration_details_api_external_api_integrations__integration_name__get","parameters":[{"name":"integration_name","in":"path","required":true,"schema":{"type":"string","title":"Integration Name"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get Integration Details Api External Api Integrations  Integration Name  Get"}}}},"404":{"description":"Integration not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/external-api/examples":{"get":{"tags":["External API Integration"],"summary":"Get Integration Examples","description":"Get example integration configurations","operationId":"get_integration_examples_api_external_api_examples_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Get Integration Examples Api External Api Examples Get"}}}},"404":{"description":"Integration not found"}}}},"/":{"get":{"tags":["Root"],"summary":"Root","description":"Root endpoint with API overview","operationId":"root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/admin":{"get":{"summary":"Admin Panel","description":"Panel de Administración ERP","operationId":"admin_panel_admin_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"ApiResponse":{"properties":{"status_code":{"type":"integer","title":"Status Code"},"headers":{"additionalProperties":{"type":"string"},"type":"object","title":"Headers"},"data":{"title":"Data"},"success":{"type":"boolean","title":"Success"},"timestamp":{"type":"string","title":"Timestamp"},"response_size":{"type":"integer","title":"Response Size"}},"type":"object","required":["status_code","headers","data","success","timestamp","response_size"],"title":"ApiResponse"},"AuthenticationConfig":{"properties":{"auth_type":{"type":"string","title":"Auth Type","description":"Authentication type (none, bearer_token, api_key, basic_auth)"},"token":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Token","description":"Bearer token or API key"},"username":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Username","description":"Username for basic auth"},"password":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Password","description":"Password for basic auth"},"api_key_header":{"type":"string","title":"Api Key Header","description":"Header name for API key","default":"X-API-Key"}},"type":"object","required":["auth_type"],"title":"AuthenticationConfig"},"CompanyCreate":{"properties":{"name":{"type":"string","maxLength":255,"minLength":2,"title":"Name","description":"Company name"},"tax_id":{"type":"string","maxLength":50,"minLength":5,"title":"Tax Id","description":"Tax identification number"},"country_code":{"type":"string","maxLength":2,"minLength":2,"title":"Country Code","description":"ISO country code"},"currency":{"type":"string","maxLength":3,"minLength":3,"title":"Currency","description":"ISO currency code"},"localization_config":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Localization Config","description":"Localization settings"}},"type":"object","required":["name","tax_id","country_code","currency"],"title":"CompanyCreate"},"CompanyResponse":{"properties":{"id":{"type":"integer","title":"Id"},"name":{"type":"string","title":"Name"},"tax_id":{"type":"string","title":"Tax Id"},"country_code":{"type":"string","title":"Country Code"},"currency":{"type":"string","title":"Currency"},"status":{"type":"string","title":"Status"},"localization_config":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Localization Config"},"tax_config":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Tax Config"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"}},"type":"object","required":["id","name","tax_id","country_code","currency","status","localization_config","tax_config","created_at","updated_at"],"title":"CompanyResponse"},"CompanyUpdate":{"properties":{"name":{"anyOf":[{"type":"string","maxLength":255,"minLength":2},{"type":"null"}],"title":"Name"},"tax_id":{"anyOf":[{"type":"string","maxLength":50,"minLength":5},{"type":"null"}],"title":"Tax Id"},"country_code":{"anyOf":[{"type":"string","maxLength":2,"minLength":2},{"type":"null"}],"title":"Country Code"},"currency":{"anyOf":[{"type":"string","maxLength":3,"minLength":3},{"type":"null"}],"title":"Currency"},"localization_config":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Localization Config"}},"type":"object","title":"CompanyUpdate"},"ElectronicSignatureRequest":{"properties":{"invoice_id":{"type":"integer","title":"Invoice Id"},"signature_data":{"additionalProperties":true,"type":"object","title":"Signature Data"}},"type":"object","required":["invoice_id","signature_data"],"title":"ElectronicSignatureRequest"},"EmailClassificationRequest":{"properties":{"email_content":{"type":"string","minLength":10,"title":"Email Content","description":"Email content to classify"},"subject":{"type":"string","title":"Subject","description":"Email subject line","default":""},"sender_email":{"type":"string","title":"Sender Email","description":"Sender email address","default":""}},"type":"object","required":["email_content"],"title":"EmailClassificationRequest"},"EmailClassificationResponse":{"properties":{"predicted_category":{"type":"string","title":"Predicted Category"},"confidence":{"type":"number","title":"Confidence"},"probabilities":{"additionalProperties":{"type":"number"},"type":"object","title":"Probabilities"},"processing_time":{"type":"number","title":"Processing Time"},"timestamp":{"type":"string","format":"date-time","title":"Timestamp"}},"type":"object","required":["predicted_category","confidence","probabilities","processing_time","timestamp"],"title":"EmailClassificationResponse"},"EmailResponseRequest":{"properties":{"email_content":{"type":"string","minLength":10,"title":"Email Content","description":"Original email content"},"subject":{"type":"string","minLength":1,"title":"Subject","description":"Original email subject"},"sender_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Sender Name","description":"Sender name"},"sender_email":{"type":"string","title":"Sender Email","description":"Sender email address"},"company_name":{"type":"string","title":"Company Name","description":"Company name","default":"Nuestra Empresa"},"agent_name":{"type":"string","title":"Agent Name","description":"Agent name","default":"Joel Araujo"}},"type":"object","required":["email_content","subject","sender_email"],"title":"EmailResponseRequest"},"EmailResponseResponse":{"properties":{"subject":{"type":"string","title":"Subject"},"content":{"type":"string","title":"Content"},"confidence":{"type":"number","title":"Confidence"},"requires_human_review":{"type":"boolean","title":"Requires Human Review"},"suggested_actions":{"items":{"type":"string"},"type":"array","title":"Suggested Actions"},"processing_time":{"type":"number","title":"Processing Time"},"generated_at":{"type":"string","format":"date-time","title":"Generated At"}},"type":"object","required":["subject","content","confidence","requires_human_review","suggested_actions","processing_time","generated_at"],"title":"EmailResponseResponse"},"EmailWorkflowRequest":{"properties":{"id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Id","description":"Email ID"},"content":{"type":"string","minLength":10,"title":"Content","description":"Email content"},"subject":{"type":"string","minLength":1,"title":"Subject","description":"Email subject"},"sender_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Sender Name","description":"Sender name"},"sender_email":{"type":"string","title":"Sender Email","description":"Sender email address"}},"type":"object","required":["content","subject","sender_email"],"title":"EmailWorkflowRequest"},"EmailWorkflowResponse":{"properties":{"email_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Email Id"},"sender_email":{"type":"string","title":"Sender Email"},"classification":{"additionalProperties":true,"type":"object","title":"Classification"},"routing":{"additionalProperties":true,"type":"object","title":"Routing"},"generated_response":{"additionalProperties":true,"type":"object","title":"Generated Response"},"workflow_status":{"type":"string","title":"Workflow Status"},"processed_at":{"type":"string","title":"Processed At"},"processing_time":{"type":"number","title":"Processing Time"}},"type":"object","required":["email_id","sender_email","classification","routing","generated_response","workflow_status","processed_at","processing_time"],"title":"EmailWorkflowResponse"},"EmployeeCreate":{"properties":{"company_id":{"type":"integer","title":"Company Id"},"employee_code":{"type":"string","maxLength":50,"minLength":1,"title":"Employee Code"},"first_name":{"type":"string","maxLength":100,"minLength":1,"title":"First Name"},"last_name":{"type":"string","maxLength":100,"minLength":1,"title":"Last Name"},"email":{"type":"string","title":"Email","description":"Valid email address"},"hire_date":{"type":"string","format":"date","title":"Hire Date"},"department":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Department"},"position":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Position"}},"type":"object","required":["company_id","employee_code","first_name","last_name","email","hire_date"],"title":"EmployeeCreate"},"EmployeeResponse":{"properties":{"id":{"type":"integer","title":"Id"},"company_id":{"type":"integer","title":"Company Id"},"employee_code":{"type":"string","title":"Employee Code"},"first_name":{"type":"string","title":"First Name"},"last_name":{"type":"string","title":"Last Name"},"email":{"type":"string","title":"Email"},"hire_date":{"type":"string","format":"date","title":"Hire Date"},"status":{"type":"string","title":"Status"},"department":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Department"},"position":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Position"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["id","company_id","employee_code","first_name","last_name","email","hire_date","status","department","position","created_at"],"title":"EmployeeResponse"},"ExecuteRequestBody":{"properties":{"config":{"$ref":"#/components/schemas/HttpRequestConfig"},"auth_config":{"anyOf":[{"$ref":"#/components/schemas/AuthenticationConfig"},{"type":"null"}]},"retry_config":{"anyOf":[{"$ref":"#/components/schemas/RetryConfig"},{"type":"null"}]}},"type":"object","required":["config"],"title":"ExecuteRequestBody"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"HttpRequestConfig":{"properties":{"method":{"type":"string","title":"Method","description":"HTTP method (GET, POST, PUT, DELETE, PATCH)"},"url":{"type":"string","title":"Url","description":"Request URL"},"headers":{"anyOf":[{"additionalProperties":{"type":"string"},"type":"object"},{"type":"null"}],"title":"Headers","description":"HTTP headers"},"body":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Body","description":"Request body"},"params":{"anyOf":[{"additionalProperties":{"type":"string"},"type":"object"},{"type":"null"}],"title":"Params","description":"Query parameters"},"timeout":{"type":"integer","maximum":300.0,"minimum":1.0,"title":"Timeout","description":"Timeout in seconds","default":30},"variables":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Variables","description":"Variables for substitution"}},"type":"object","required":["method","url"],"title":"HttpRequestConfig"},"IntegrationConfig":{"properties":{"name":{"type":"string","maxLength":100,"minLength":1,"title":"Name","description":"Integration name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description","description":"Integration description"},"http_config":{"$ref":"#/components/schemas/HttpRequestConfig"},"auth_config":{"anyOf":[{"$ref":"#/components/schemas/AuthenticationConfig"},{"type":"null"}]},"retry_config":{"anyOf":[{"$ref":"#/components/schemas/RetryConfig"},{"type":"null"}]},"is_active":{"type":"boolean","title":"Is Active","description":"Whether integration is active","default":true}},"type":"object","required":["name","http_config"],"title":"IntegrationConfig"},"IntegrationExecuteBody":{"properties":{"variables":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Variables","description":"Variables to substitute in the request"}},"type":"object","title":"IntegrationExecuteBody"},"IntegrationTestResult":{"properties":{"integration_name":{"type":"string","title":"Integration Name"},"test_successful":{"type":"boolean","title":"Test Successful"},"status_code":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Status Code"},"error":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error"},"response_time":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Response Time"},"test_timestamp":{"type":"string","title":"Test Timestamp"}},"type":"object","required":["integration_name","test_successful","test_timestamp"],"title":"IntegrationTestResult"},"InvoiceCreate":{"properties":{"company_id":{"type":"integer","title":"Company Id"},"customer_name":{"type":"string","maxLength":255,"minLength":1,"title":"Customer Name"},"customer_tax_id":{"type":"string","maxLength":50,"minLength":5,"title":"Customer Tax Id"},"customer_email":{"type":"string","title":"Customer Email","description":"Valid email address"},"issue_date":{"type":"string","format":"date","title":"Issue Date"},"due_days":{"type":"integer","maximum":365.0,"minimum":1.0,"title":"Due Days","default":30}},"type":"object","required":["company_id","customer_name","customer_tax_id","customer_email","issue_date"],"title":"InvoiceCreate"},"InvoiceLineCreate":{"properties":{"invoice_id":{"type":"integer","title":"Invoice Id"},"product_name":{"type":"string","maxLength":255,"minLength":1,"title":"Product Name"},"quantity":{"anyOf":[{"type":"number","exclusiveMinimum":0.0},{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"}],"title":"Quantity"},"unit_price":{"anyOf":[{"type":"number","minimum":0.0},{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"}],"title":"Unit Price"},"tax_rate":{"anyOf":[{"type":"number","maximum":100.0,"minimum":0.0},{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"}],"title":"Tax Rate"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"}},"type":"object","required":["invoice_id","product_name","quantity","unit_price","tax_rate"],"title":"InvoiceLineCreate"},"InvoiceLineResponse":{"properties":{"id":{"type":"integer","title":"Id"},"invoice_id":{"type":"integer","title":"Invoice Id"},"product_name":{"type":"string","title":"Product Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"quantity":{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Quantity"},"unit_price":{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Unit Price"},"tax_rate":{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Tax Rate"},"line_total":{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Line Total"}},"type":"object","required":["id","invoice_id","product_name","description","quantity","unit_price","tax_rate","line_total"],"title":"InvoiceLineResponse"},"InvoiceReportResponse":{"properties":{"company_id":{"type":"integer","title":"Company Id"},"period_from":{"type":"string","title":"Period From"},"period_to":{"type":"string","title":"Period To"},"summary":{"additionalProperties":true,"type":"object","title":"Summary"},"by_status":{"additionalProperties":{"additionalProperties":true,"type":"object"},"type":"object","title":"By Status"},"compliance_report":{"additionalProperties":true,"type":"object","title":"Compliance Report"}},"type":"object","required":["company_id","period_from","period_to","summary","by_status","compliance_report"],"title":"InvoiceReportResponse"},"InvoiceResponse":{"properties":{"id":{"type":"integer","title":"Id"},"company_id":{"type":"integer","title":"Company Id"},"invoice_number":{"type":"string","title":"Invoice Number"},"customer_name":{"type":"string","title":"Customer Name"},"customer_tax_id":{"type":"string","title":"Customer Tax Id"},"customer_email":{"type":"string","title":"Customer Email"},"issue_date":{"type":"string","format":"date","title":"Issue Date"},"due_date":{"type":"string","format":"date","title":"Due Date"},"status":{"type":"string","title":"Status"},"subtotal":{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Subtotal"},"tax_amount":{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Tax Amount"},"total":{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Total"},"is_electronic":{"type":"boolean","title":"Is Electronic"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["id","company_id","invoice_number","customer_name","customer_tax_id","customer_email","issue_date","due_date","status","subtotal","tax_amount","total","is_electronic","created_at"],"title":"InvoiceResponse"},"PayrollCalculationRequest":{"properties":{"employee_id":{"type":"integer","title":"Employee Id"},"date_from":{"type":"string","format":"date","title":"Date From"},"date_to":{"type":"string","format":"date","title":"Date To"}},"type":"object","required":["employee_id","date_from","date_to"],"title":"PayrollCalculationRequest"},"PayrollCalculationResponse":{"properties":{"employee_id":{"type":"integer","title":"Employee Id"},"period_from":{"type":"string","format":"date","title":"Period From"},"period_to":{"type":"string","format":"date","title":"Period To"},"lines":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Lines"},"total_amount":{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Total Amount"}},"type":"object","required":["employee_id","period_from","period_to","lines","total_amount"],"title":"PayrollCalculationResponse"},"RetryConfig":{"properties":{"max_retries":{"type":"integer","maximum":10.0,"minimum":0.0,"title":"Max Retries","description":"Maximum number of retries","default":3},"backoff_factor":{"type":"number","maximum":10.0,"minimum":0.1,"title":"Backoff Factor","description":"Backoff factor for retries","default":1.0},"retry_statuses":{"items":{"type":"integer"},"type":"array","title":"Retry Statuses","description":"HTTP status codes to retry","default":[429,500,502,503,504]},"no_retry_statuses":{"items":{"type":"integer"},"type":"array","title":"No Retry Statuses","description":"HTTP status codes to not retry","default":[400,401,403,404]}},"type":"object","title":"RetryConfig"},"SalaryStructureCreate":{"properties":{"company_id":{"type":"integer","title":"Company Id"},"name":{"type":"string","maxLength":255,"minLength":1,"title":"Name"},"structure_type":{"type":"string","title":"Structure Type","description":"employee or hourly"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"}},"type":"object","required":["company_id","name","structure_type"],"title":"SalaryStructureCreate"},"SalaryStructureResponse":{"properties":{"id":{"type":"integer","title":"Id"},"company_id":{"type":"integer","title":"Company Id"},"name":{"type":"string","title":"Name"},"type":{"type":"string","title":"Type"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"is_active":{"type":"boolean","title":"Is Active"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["id","company_id","name","type","description","is_active","created_at"],"title":"SalaryStructureResponse"},"TrainingRequest":{"properties":{"training_texts":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Training Texts","description":"Training texts"},"training_labels":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Training Labels","description":"Training labels"}},"type":"object","title":"TrainingRequest"},"TrainingResponse":{"properties":{"accuracy":{"type":"number","title":"Accuracy"},"precision":{"type":"number","title":"Precision"},"recall":{"type":"number","title":"Recall"},"f1_score":{"type":"number","title":"F1 Score"},"training_time":{"type":"number","title":"Training Time"},"model_size":{"type":"integer","title":"Model Size"}},"type":"object","required":["accuracy","precision","recall","f1_score","training_time","model_size"],"title":"TrainingResponse"},"UpdateSystemPromptRequest":{"properties":{"prompt":{"type":"string","minLength":10,"title":"Prompt","description":"New system prompt"}},"type":"object","required":["prompt"],"title":"UpdateSystemPromptRequest"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}}}}